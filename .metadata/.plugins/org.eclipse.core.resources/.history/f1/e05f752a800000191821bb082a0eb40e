package cibertec;

import java.awt.EventQueue;

import javax.swing.JDialog;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class GenerarReportes extends JDialog implements ActionListener {
	private JScrollPane scrollPane;
	private JTextArea txtS;
	private JLabel lblTipoDeReporte;
	private JComboBox cboTipoDeReporte;
	private JButton btnCerrar;

	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					GenerarReportes dialog = new GenerarReportes();
					dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
					dialog.setVisible(true);
				}
				catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the dialog.
	 */
	public GenerarReportes() {
		setTitle("Generar reportes");
		setBounds(100, 100, 800, 400);
		getContentPane().setLayout(null);
		
		scrollPane = new JScrollPane();
		scrollPane.setBounds(10, 73, 744, 265);
		getContentPane().add(scrollPane);
		
		txtS = new JTextArea();
		scrollPane.setViewportView(txtS);
		
		lblTipoDeReporte = new JLabel("Tipo de reporte");
		lblTipoDeReporte.setBounds(10, 24, 89, 16);
		getContentPane().add(lblTipoDeReporte);
		
		cboTipoDeReporte = new JComboBox();
		cboTipoDeReporte.addActionListener(this);
		cboTipoDeReporte.setModel(new DefaultComboBoxModel(new String[] {"Ventas por marca", "Marcas con venta \u00F3ptima", "Precios en relaci\u00F3n al promedio", "Precio promedio, mayor y menor"}));
		cboTipoDeReporte.setBounds(123, 22, 372, 20);
		getContentPane().add(cboTipoDeReporte);
		
		btnCerrar = new JButton("Cerrar");
		btnCerrar.addActionListener(this);
		btnCerrar.setBounds(665, 20, 89, 23);
		getContentPane().add(btnCerrar);

	}

	public void actionPerformed(ActionEvent e) {
		if (e.getSource() == btnCerrar) {
			actionPerformedBtnCerrar(e);
		}
		if (e.getSource() == cboTipoDeReporte) {
			actionPerformedCboTipoDeReporte(e);
		}
	}
	protected void actionPerformedCboTipoDeReporte(ActionEvent e) {
		txtS.setText("");
		int posTipo = cboTipoDeReporte.getSelectedIndex();
		switch(posTipo) {
			case 0:
				ventaPorMarca();
				break;
			case 1:
				marcaVentaOptima();
				break;
			case 2:
				precioAlPromedio();
				break;
			default:
				precioMayorMenor();
				break;
		}
	}
	
	void imprimir(String s){
		txtS.append(s + "\n");
	}
	
	void ventaPorMarca() {
		imprimir("VENTAS POR MARCA");
		imprimir("");
		imprimir("Nombre: " + Tienda.marca0);
		imprimir("Cantidad de ventas: " + Vender.cantidadVentasMarca0);
		imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas0);
		imprimir("Importe total acumulado: " + Vender.impAcumuladoMarca0);
		imprimir("");
		imprimir("Nombre: " + Tienda.marca1);
		imprimir("Cantidad de ventas: " + Vender.cantidadVentasMarca1);
		imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas1);
		imprimir("Importe total acumulado: " + Vender.impAcumuladoMarca1);
		imprimir("");
		imprimir("Nombre: " + Tienda.marca2);
		imprimir("Cantidad de ventas: " + Vender.cantidadVentasMarca2);
		imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas2);
		imprimir("Importe total acumulado: " + Vender.impAcumuladoMarca2);
		imprimir("");
		imprimir("Nombre: " + Tienda.marca3);
		imprimir("Cantidad de ventas: " + Vender.cantidadVentasMarca3);
		imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas3);
		imprimir("Importe total acumulado: " + Vender.impAcumuladoMarca3);
		imprimir("");
		imprimir("Nombre: " + Tienda.marca4);
		imprimir("Cantidad de ventas: " + Vender.cantidadVentasMarca4);
		imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas4);
		imprimir("Importe total acumulado: " + Vender.impAcumuladoMarca4);
		imprimir("");
		
	}
	
	void marcaVentaOptima() {
		imprimir("Alfajores con venta óptima");
		imprimir("");
		if(Vender.cantidadUnidVendidas0 < Tienda.cantidadOptima &&
				Vender.cantidadUnidVendidas1 < Tienda.cantidadOptima &&
				Vender.cantidadUnidVendidas2 < Tienda.cantidadOptima &&
				Vender.cantidadUnidVendidas3 < Tienda.cantidadOptima &&
				Vender.cantidadUnidVendidas4 < Tienda.cantidadOptima) {
			imprimir("Ningún producto logró la cantidad mínima");
		}
		if(Vender.cantidadUnidVendidas0 >= Tienda.cantidadOptima) {
			imprimir("Marca: Alfano");
			imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas0 + "(" + (Vender.cantidadUnidVendidas0 - Tienda.cantidadOptima) + " más que la cantidad óptima)");
		}
		if(Vender.cantidadUnidVendidas1 >= Tienda.cantidadOptima) {
			imprimir("Marca: Delicia");
			imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas1 + "(" + (Vender.cantidadUnidVendidas1 - Tienda.cantidadOptima) + " más que la cantidad óptima)");
		}
		if(Vender.cantidadUnidVendidas2 >= Tienda.cantidadOptima) {
			imprimir("Marca: Vimar");
			imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas2 + "(" + (Vender.cantidadUnidVendidas2 - Tienda.cantidadOptima) + " más que la cantidad óptima)");
		}
		if(Vender.cantidadUnidVendidas3 >= Tienda.cantidadOptima) {
			imprimir("Marca: Turok");
			imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas3 + "(" + (Vender.cantidadUnidVendidas3 - Tienda.cantidadOptima) + " más que la cantidad óptima)");
		}
		if(Vender.cantidadUnidVendidas4 >= Tienda.cantidadOptima){
			imprimir("Marca: Havanna");
			imprimir("Cantidad total de unidades vendidas: " + Vender.cantidadUnidVendidas4 + "(" + (Vender.cantidadUnidVendidas4 - Tienda.cantidadOptima) + " más que la cantidad óptima)");
		}
	}
	
	void precioAlPromedio() {
		double promedio = promedioPrecios();
		String mensaje0, mensaje1, mensaje2, mensaje3, mensaje4;
		
		if(Tienda.precio0 < promedio)
			mensaje0 = "(menor al promedio)";
		else
			mensaje0 = "(mayor al promedio)";
		
		if(Tienda.precio1 < promedio)
			mensaje1 = "(menor al promedio)";
		else
			mensaje1 = "(mayor al promedio)";
		
		if(Tienda.precio2 < promedio)
			mensaje2 = "(menor al promedio)";
		else
			mensaje2 = "(mayor al promedio)";
		
		if(Tienda.precio3 < promedio)
			mensaje3 = "(menor al promedio)";
		else
			mensaje3 = "(mayor al promedio)";
		
		if(Tienda.precio4 < promedio)
			mensaje4 = "(menor al promedio)";
		else
			mensaje4 = "(mayor al promedio)";
		
		imprimir("Precios con relación al promedio");
		imprimir("");
		imprimir("Alfano");
		imprimir("Precio: " + Tienda.precio0 + " " + mensaje0);
		imprimir("");
		imprimir("Delicia");
		imprimir("Precio: " + Tienda.precio1 + " " + mensaje1);
		imprimir("");
		imprimir("Vimar");
		imprimir("Precio: " + Tienda.precio2 + " " + mensaje2);
		imprimir("");
		imprimir("Turok");
		imprimir("Precio: " + Tienda.precio3 + " " + mensaje3);
		imprimir("");
		imprimir("Havanna");
		imprimir("Precio: " + Tienda.precio4 + " " + mensaje4);
		imprimir("");
	}
	
	double promedioPrecios() {
		return (Tienda.precio0 + Tienda.precio1 + Tienda.precio2 + Tienda.precio3 + Tienda.precio4)/5;
	}
	
	void precioMayorMenor() {
		double promedio = promedioPrecios(), menor, mayor;
		
		menor = Tienda.precio0;
		mayor = Tienda.precio0;
		
		if(menor > Tienda.precio1)
			menor = Tienda.precio1;
		if(menor > Tienda.precio2)
			menor = Tienda.precio2;
		if(menor > Tienda.precio3)
			menor = Tienda.precio3;
		if(menor > Tienda.precio4)
			menor = Tienda.precio4;
		
		if(mayor < Tienda.precio1)
			mayor = Tienda.precio1;
		if(mayor < Tienda.precio2)
			mayor = Tienda.precio2;
		if(mayor < Tienda.precio3)
			mayor = Tienda.precio3;
		if(mayor < Tienda.precio4)
			mayor = Tienda.precio4;

		imprimir("Precio promedio, menor y mayor");
		imprimir("");
		imprimir("Precio promedio: " + promedio);
		imprimir("Precio menor: " + menor);
		imprimir("Precio mayor: " + mayor);
		
	}
	
	protected void actionPerformedBtnCerrar(ActionEvent e) {
		dispose();
	}
}
